{% extends 'layout.html.twig' %}

{% block title %}
  LibreCores Search
{% endblock %}

{% block pagepath %}Home &raquo; LibreCores Search{% endblock %}

{% block stylesheets %}
  {{ parent() }}
  {% stylesheets filter="cssrewrite"
  "assets/css/instantsearch.min.css" %}
  <link rel="stylesheet" href="{{ asset_url }}"/>
  {% endstylesheets %}
{% endblock %}

{% block content %}
  {# Templates for instant search #}
  <div class="row">
    <div class="col-sm-3">
      <ul id="classification-hierarchy" class="classification-search">

      </ul>
    </div>
  </div>

  {# Project Template #}
  <script type="text/html" id="projects-template">
    {% verbatim %}
        <h2><a href="/{{ parentUserName }}/{{ name }}">{{{ _highlightResult.parentUserName.value }}}/{{{ _highlightResult.name.value }}}</a></h2>
            <div>{{{ _highlightResult.tagName.value }}}</div>
            <div class="classification-container">
            {{#_highlightResult.classifications}}
               <a href="/search?query={{ value }}&type=projects" class="classifiation-tag">{{{ value }}}</a>
            {{/_highlightResult.classifications}}
            </div>
            <div><i>
              added on {{{ creationDetails }}}
            </i></div>
            <div class="librecores-project-list-metadata">
              <span class="metric metric-lang">
                <i class="fa fa-code"></i>
                <span class="sr-only">Major language: </span>
                {{{ _highlightResult.mostUsedLanguage.value }}}
              </span>
              <span class="updated">
              <i class="fa fa-history"></i> Updated {{{ activityDetails }}}
              </span>
            </div>
            <hr/>
    {% endverbatim %}
  </script>
{% endblock %}

{% block javascripts %}
  {{ parent() }}
  {% javascripts
  'assets/js/instantsearch.js'
  'assets/js/search.js'
  filter="?jsqueeze" %}
  <script src="{{ asset_url }}"></script>
  {% endjavascripts %}
{% endblock %}

{% block pagejs %}
  {# do not use autofocus attribute to work around FF bug 712130 (FOUC) #}

  $(function() {
  var classificationDetails = {
    'id' : null,
    'name' : 'root',
    'children' : {{ classificationHierarchy|json_encode|raw }}
  }
  var classifications = {{ classificationDetails|json_encode|raw }}
  classificationSearch($('#classification-hierarchy'), classificationDetails, classifications);
  
  });
{% endblock %}
